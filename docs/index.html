<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>GP2040-CE | Community Edition Firmware</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<link rel="icon" href="/favicon.ico">
	<meta name="description" content="GP2040-CE is a gamepad firmware for the Raspberry Pi Pico and other boards based on the RP2040 microcontroller, and provides high performance with a rich feature set across multiple platforms. GP2040-CE is compatible with platforms such as PC, Nintendo Switch, PS3/PS4, Steam Deck, MiSTer and Android.">
	<meta name="keywords" content="gp2040,gp2040ce,gp2040-ce,rp2040,controller,firmware,ps3,ps4,switch">
	<meta name="robots" content="index, archive">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
	<link rel="canonical" href="https://gp2040-ce.info/">
	<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/docsify-themeable@0/dist/css/theme-simple-dark.css">
	<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/prism-themes@1.9.0/themes/prism-coldark-dark.min.css">
	<link rel="stylesheet" href="/site.css">
</head>
<body>
	<div id="app"></div>

	<!-- Vue 2.x -->
	<script src="//cdn.jsdelivr.net/npm/vue@2/dist/vue.min.js"></script>
	<!-- <script src="//cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script> -->
	<script src="//cdn.jsdelivr.net/npm/v-scroll-threshold@2.0.0/dist/v-scroll-threshold.min.js"></script>
	<script>var thresholdPlugin = VScrollThreshold;</script>
	<script src="//cdn.jsdelivr.net/npm/vue-sticky-element@1.1.2/dist/vue-sticky-element.min.js"></script>
	<!-- Docsify v4 -->
	<script src="//cdn.jsdelivr.net/npm/docsify@4"></script>
	<!-- docsify-themeable (latest v0.x.x) -->
	<script src="//cdn.jsdelivr.net/npm/docsify-themeable@0/dist/js/docsify-themeable.min.js"></script>
	<script src="//cdn.jsdelivr.net/npm/prismjs@1.x/components/prism-c.min.js"></script>
	<script src="//cdn.jsdelivr.net/npm/prismjs@1.x/components/prism-cpp.min.js"></script>
	<script src="//cdn.jsdelivr.net/npm/prismjs@1.x/components/prism-ini.min.js"></script>

	<script>
		const renderer = {
			heading(text, level) {
				return `<h3>${text}</h3>`;
			}
		};

		window.$docsify = {
			name: 'GP2040-CE',
			repo: 'https://github.com/OpenStickCommunity/GP2040-CE',
			homepage: 'https://raw.githubusercontent.com/OpenStickCommunity/GP2040-CE/main/README.md',
			logo: 'assets/images/gp2040-ce-logo.png',
			loadSidebar: '_sidebar.md',
			auto2top: true,
			subMaxLevel: 3,
			themeable: {
				readyTransition : true, // default
				responsiveTables: true  // default
			},
			vueGlobalOptions: {
				directives: {
					VScrollThreshold,
					VueStickyElement,
				},
				data() {
					return {
						labelData: {
							"GP2040": { "name": "GP2040", "Up": "Up", "Down": "Down", "Left": "Left", "Right": "Right", "B1": "B1", "B2": "B2", "B3": "B3", "B4": "B4", "L1": "L1", "R1": "R1", "L2": "L2", "R2": "R2", "S1": "S1", "S2": "S2", "L3": "L3", "R3": "R3", "A1": "A1", "A2": "A2" },
							"XInput": { "name": "XInput", "Up": "Up", "Down": "Down", "Left": "Left", "Right": "Right", "B1": "A", "B2": "B", "B3": "X", "B4": "Y", "L1": "LB", "R1": "RB", "L2": "LT", "R2": "RT", "S1": "Back", "S2": "Start", "L3": "LS", "R3": "RS", "A1": "Guide", "A2": "(A2)" },
							"DirectInput": { "name": "DirectInput", "Up": "Up", "Down": "Down", "Left": "Left", "Right": "Right", "B1": "2", "B2": "3", "B3": "1", "B4": "4", "L1": "5", "R1": "6", "L2": "7", "R2": "8", "S1": "9", "S2": "10", "L3": "11", "R3": "12", "A1": "13", "A2": "14" },
							"Nintendo Switch": { "name": "Nintendo Switch", "Up": "Up", "Down": "Down", "Left": "Left", "Right": "Right", "B1": "B", "B2": "A", "B3": "Y", "B4": "X", "L1": "L", "R1": "R", "L2": "ZL", "R2": "ZR", "S1": "Minus", "S2": "Plus", "L3": "LS", "R3": "RS", "A1": "Home", "A2": "Capture" },
							"PS4":    { "name": "PS4", "Up": "Up", "Down": "Down", "Left": "Left", "Right": "Right", "B1": "Cross", "B2": "Circle", "B3": "Square", "B4": "Triangle", "L1": "L1", "R1": "R1", "L2": "L2", "R2": "R2", "S1": "Share", "S2": "Options", "L3": "L3", "R3": "R3", "A1": "PS", "A2": "Touchpad" },
							"PS3":    { "name": "PS3", "Up": "Up", "Down": "Down", "Left": "Left", "Right": "Right", "B1": "Cross", "B2": "Circle", "B3": "Square", "B4": "Triangle", "L1": "L1", "R1": "R1", "L2": "L2", "R2": "R2", "S1": "Select", "S2": "Start", "L3": "L3", "R3": "R3", "A1": "PS", "A2": "(A2)" },
							"Arcade": { "name": "Arcade", "Up": "Up", "Down": "Down", "Left": "Left", "Right": "Right", "B1": "K1", "B2": "K2", "B3": "P1", "B4": "P2", "L1": "P4", "R1": "P3", "L2": "K4", "R2": "K3", "S1": "Select", "S2": "Start", "L3": "LS", "R3": "RS", "A1": "Home", "A2": "(A2)" },
						},
						selectedLabels: localStorage.getItem('selectedLabels') || 'GP2040',
					};
				}
			},
			vueComponents: {
				'download-box': {
					props: ['release'],
					template: `
						<a :href="release.url">
							<div>
								<img :src="'/assets/boards/' + release.key + '.jpg'">
								<span>{{ release.name }}</span>
							</div>
						</a>
					`,
				},

				'download-category': {
					props: ['category'],
					template: `
						<div class="download-category">
							<h3>{{ category }}</h3>
							<p v-if="category === 'Legacy Devices'">The builds for these devices have been deprecated and are no longer supported by GP2040-CE. They may be removed from the releases at some point in the future.</p>
							<div class="download-category-list">
								<download-box
									v-for="release in releases[category]"
									:key="release.title"
									:release="release">
								</download-box>
							</div>
						</div>
					`,
					data() {
						return {
							releases: this.$root.releases,
						};
					},
				},

				'download-page': {
					template: `
					<div v-if="fetched">
						<version-name></version-name>
						<download-category
						v-for="category of configCategories"
						:key="category"
						:category="category">
						</download-category>
						<div>
							<h3>Flash Nuke</h3>
							<p>
								Use the <a href="https://raw.githubusercontent.com/OpenStickCommunity/GP2040-CE/main/docs/downloads/flash_nuke.uf2">flash_nuke.uf2</a>
								file to completely erase the flash of the RP2040 board. <strong>THIS WILL ERASE ALL SAVED SETTINGS!</strong>
								Use this prior to flashing GP2040-CE on your device if you want to start from a clean slate, or as a troubleshooting step before to reporting an issue.
							</p>
						</div>
						<release-notes></release-notes>
					</div>
					`,
					data() {
						return {
							configCategories: ['Microcontroller Boards', 'Open Source Devices', 'Closed Source Devices', 'Legacy Devices'],
							configNames: {
								BentoBox                   : { name: 'ScrubTier BentoBox', category: 'Closed Source Devices', },
								DURAL                      : { name: 'BatiKING DURAL', category: 'Legacy Devices', },
								FightboardV3               : { name: 'thnikk Fightboard V3', category: 'Legacy Devices', },
								FightboardV3Mirrored       : { name: 'thnikk Fightboard V3 (Mirrored)', category: 'Legacy Devices', },
								FlatboxRev4                : { name: 'Flatbox Rev 4', category: 'Open Source Devices', },
								FlatboxRev5                : { name: 'Flatbox Rev 5', category: 'Open Source Devices', },
								KB2040                     : { name: 'Adafruit KB2040', category: 'Microcontroller Boards'},
								MavercadeKeebfighter       : { name: 'Mavercade Keebfighter', category: 'Closed Source Devices', },
								Pico                       : { name: 'Raspberry Pi Pico', category: 'Microcontroller Boards', pos: 1 },
								PicoAnn                    : { name: 'PicoAnn', category: 'Closed Source Devices', },
								PicoFightingBoard          : { name: 'Pico Fighting Board', category: 'Open Source Devices', },
								RP2040AdvancedBreakoutBoard: { name: 'RP2040 Advanced Breakout Board', category: 'Open Source Devices', },
								ReflexEncoder              : { name: 'MiSTerAddons Reflex Arcade Encoder', category: 'Open Source Devices', },
								SparkFunProMicro           : { name: 'SparkFun Pro Micro', category: 'Microcontroller Boards', },
								WaveshareZero              : { name: 'Waveshare RP2040-Zero', category: 'Microcontroller Boards', },
							},
							fetched: false,
							releaseNotes: this.$root.releaseNotes,
							releaseVersion: this.$root.releaseVersion,
							releases: this.$root.releases,
						};
					},
					created() {
						fetch("https://api.github.com/repos/OpenStickCommunity/GP2040-CE/releases/latest", { method: "GET", cache: "force-cache" })
							.then(response => response.json())
							.then(data => {
								const releaseInfo = data;

								this.$root.releaseNotes = releaseInfo.body;
								this.$root.releaseVersion = releaseInfo.name;
								this.$root.releases = releaseInfo.assets
									.filter(a => a.name.startsWith('GP2040-CE_'))
									.filter(a => {
										const key = a.name.substring(a.name.lastIndexOf('_') + 1).replace('.uf2', '');
										return Object.keys(this.configNames).indexOf(key) > -1;
									})
									.map(a => {
										const key = a.name.substring(a.name.lastIndexOf('_') + 1).replace('.uf2', '');
										return {
											key,
											name: this.configNames[key].name,
											url: a.browser_download_url,
											img: `/assets/boards/${key}.jpg`,
											category: this.configNames[key].category,
											pos: this.configNames[key].pos,
										};
									})
									.sort((a, b) => (a.pos === undefined ? Number.MAX_VALUE : a.pos) - (b.pos === undefined ? Number.MAX_VALUE : b.pos))
									.reduce((p, r) => {
										let values = { ...p };
										if (!values[r.category])
											values[r.category] = [];

										values[r.category].push(r);
										return values;
									}, { });

								console.log(this.$root.releases);

								this.fetched = true;
							});
					},
				},

				'label-selector': {
					template: `
						<VueStickyElement visibleOnDirection="disabled" class="label-select" stuckClass="sticky-label-select">
							<div class="form-dropdown">
								<select name="labelSelect" v-model="selectedLabels" v-on:change="setSelectedLabels">
									<option v-for="item in labelData" :key="item.name" :value="item.name">{{ item.name }}</option>
								</select>
							</div>
						</VueStickyElement>
					`,
					data() {
						return {
							labelData: this.$root.labelData,
							selectedLabels: this.$root.selectedLabels,
						};
					},
					methods: {
						setSelectedLabels($event) {
							localStorage.setItem('selectedLabels', $event.target.value);
							this.$root.selectedLabels = $event.target.value;
						},
					},
				},

				'hotkey': {
					props: ['buttons'],
					template: `
						<strong>
							<code class="hotkey">{{ buttons.reduce((prev, next) => prev ? prev + " + " + labelData[state.selectedLabels][next] : labelData[state.selectedLabels][next] , "") }}</code>
						</strong>
					`,
					data() {
						return {
							state: this.$root.$data,
							labelData: this.$root.labelData,
						};
					},
				},

				'version-name': {
					template: `<h2>GP2040-CE <strong v-text="version" v-if="version"></strong></h2>`,
					data() {
						return {
							version: this.$root.releaseVersion,
						};
					},
				},

				'release-notes': {
					template: `
						<div v-html="body"></div>
					`,
					data() {
						marked.use({ renderer })
						return {
							body: marked.parse(this.$root.releaseNotes ? "---\r\n## Release Notes\r\n" + this.$root.releaseNotes : ""),
						}
					},
				},

			}
		};
	</script>
</body>
</html>
